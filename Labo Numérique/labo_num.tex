\documentclass{../template/labo}

\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{ucs}
\usepackage{amsthm} %numéroter les questions
\usepackage[frenchb]{babel}
\usepackage{datetime}
\usepackage{xspace} % typographie IN
\usepackage{hyperref}% hyperliens
\usepackage[all]{hypcap} %lien pointe en haut des figures
\usepackage[french]{varioref} %voir x p y
\usepackage{fancyhdr}% en têtes
\usepackage[]{graphicx} %include pictures
% \usepackage{pgfplots}
\usepackage[americanresistors,siunitx]{circuitikz}
\usepackage[]{gnuplottex}
\usepackage{ifthen}
\usepackage{mathastext} % math as standfard text : units are respecting typography conventions.
\usepackage[]{subfig}
\usepackage[]{attachfile}
\usepackage{tikz}
\usetikzlibrary{babel,positioning,calc}
\usepackage{siunitx}
\usepackage{amssymb}
\usepackage{xcolor}
\usepackage{float}
\usepackage[normalem]{ulem}
\usepackage{todonotes}

%%%%%%%%%%%%
% Tables
%%%%%%%%%%%%
\usepackage{booktabs}
\renewcommand{\arraystretch}{1.1} % Opens up the table a tad
\usepackage{multicol}
\usepackage{multirow}

\newboolean{koriG}
\ifx\koriG\undefined
\correction{false}
\else
\correction{true}
\fi

\newcommand{\itgv}[1]{\ifthenelse{\boolean{corrige}}{{\color{blue}#1}}{}} %si corrigé vrai...
\newcommand{\ifgv}[1]{\ifthenelse{\boolean{corrige}}{}{#1}} %si corrigé vrai...

% \correction{false}
%\correction{true}

\definecolor{darkblue}{rgb}{0,0,0.5}

%% fancy header & foot
\pagestyle{fancy}
\lhead{[ELEC-H-301] Électronique appliquée\\ LABO \no 4 : Circuits logiques}
\rhead{v2.1.0 \\ page \thepage}
\chead{\ifthenelse{\boolean{corrige}}{Corrigé}{}}
\cfoot{}
%%

\author{The Fantastic Four}


\setlength{\parindent}{0pt}


%from SO: kinky cross for wires
\tikzset{
  declare function={% in case of CVS which switches the arguments of atan2
    atan3(\a,\b)=ifthenelse(atan2(0,1)==90, atan2(\a,\b), atan2(\b,\a));},
  kinky cross radius/.initial=+.125cm,
  @kinky cross/.initial=+, kinky crosses/.is choice,
  kinky crosses/left/.style={@kinky cross=-},kinky crosses/right/.style={@kinky cross=+},
  kinky cross/.style args={(#1)--(#2)}{
    to path={
      let \p{@kc@}=($(\tikztotarget)-(\tikztostart)$),
          \n{@kc@}={atan3(\p{@kc@})+180} in
      -- ($(intersection of \tikztostart--{\tikztotarget} and #1--#2)!%
             \pgfkeysvalueof{/tikz/kinky cross radius}!(\tikztostart)$)
      arc [ radius     =\pgfkeysvalueof{/tikz/kinky cross radius},
            start angle=\n{@kc@},
            delta angle=\pgfkeysvalueof{/tikz/@kinky cross}180 ]
      -- (\tikztotarget)}}}


\begin{document}
\tptitle{}{Séance 4~: Circuits logiques}

\section{Introduction}

Les passages nécessitant des pré-déterminations ou des réflexions théoriques sont indiqués par un symbole \faCogs~ dans la marge,
ceux nécessitant de manipuler du matériel par le symbole \faFlask~ et les passages informatif par \faLightbulbO.

\subsection{But de la manipulation et objectifs d'apprentissage}
Cette manipulation a pour but d'illustrer :
\begin{itemize}
\item au niveau «application» : le fonctionnement de circuits logiques câblés
\item au niveau «composant» : le fonctionnement de circuits logiques discrets.
\end{itemize}~\\

À la fin de ce laboratoire, vous devez être capable de :
\begin{itemize}
\item donner la table de vérité d'un circuit logique ;
\item réaliser et tester un circuit logique ;
\item comprendre la notion de temps de propagation ;
\item comprendre le fonctionnement d'une bascule R-S ;
\item réaliser et tester une bascule R-S et une bascule D à l'aide de portes logiques.
\end{itemize}

\subsection{Prérequis}
Chapitres \no 24 et \no 25  du livre de référence (ed 5).\\ En particulier :
\begin{itemize}
\item algèbre de Boole
\item portes logiques, états logiques
\item logique combinatoire
\item délai de propagation
\item logique séquentielle : bascules R-S et D.
\end{itemize}

\subsection{Matériel}

\begin{center}
	\begin{tabular}{p{0.2\textwidth}rlp{0.1\textwidth}}
		Composant & \multicolumn{2}{c}{Valeur} & Quantité \\\toprule
		\multirow{1}{*}{74HC00} &  & & x1 \\\midrule
		\multirow{1}{*}{74HC32} &  & & x1 \\\midrule
		\multirow{1}{*}{74HC04} &  & & x1 \\\midrule
		\multirow{1}{*}{Interrupteur} 	& & & x3 \\\midrule
		\multirow{1}{*}{Résistance} 	& 330 & $\si{\ohm}$ & x2 \\\midrule
		LED TLHR5400 & & & x2 \\\bottomrule
	\end{tabular}
\end{center}

\subsection{Prédéterminations}
Les questions \ref{Q:tv1}, \ref{Q:tv2}, \ref{Q:AND-NAND}, \ref{Q:chrono}, \ref{Q:rs_deb} à \ref{Q:rs_fin} et \ref{Q:dlatch} doivent être faites \textbf{avant} l'arrivée au laboratoire.

\section{Concepts}

\begin{info}
Les circuits logiques sont invisibles mais fortement présent autour de nous : ordinateurs, téléphones, tablettes numériques\dots Même si la complexité des circuits a fortement augmenté depuis quelques décennies, les fonctions de base sont restées essentiellement identiques. Ce labo a pour but de vous montrer comment réaliser les fonctions de base de la logique numérique avec des circuits conçus à cet effet.
\end{info}

\section{Logique combinatoire}

\begin{info}
Les circuits décrits dans cette section sont \textbf{combinatoires}, c'est à dire que leur sortie ne dépend que de l'état des entrées.

%\subsection{Opérations de base}
Les opérations logiques usuelles sont :
\end{info}

% rappel des portes logiques
%footnote : représentation US

\begin{center}
%\shorthandoff{:!}
		\begin{circuitikz} \draw
		(0,0) node [american nand port]{}
		(-0.7,-0.8) node  {NAND}

		(2,0) node [american nor port] {}
		(2-0.7,-0.8) node  {NOR}

		(4,0) node [american xnor port] {}
		(4-0.7,-0.8) node  {XNOR}

		(0,2) node [american and port] {}
		(-0.7,2-0.8) node  {AND}

		(2,2) node [american or port] {}
		(2-0.7,2-0.8) node  {OR}

		(4,2) node [american xor port] {}
		(4-0.7,2-0.8) node  {XOR}

		(6,1) node [american not port] {}
		(6.7-0.7,1-0.8) node  {NOT}

	;\end{circuitikz}
%\shorthandon{:!}
	\end{center}

\begin{predet}
\Question{
	Donnez la table de vérité du circuit suivant :

	\begin{center}
%\shorthandoff{:!}
		\begin{circuitikz} \draw
		(0,0) node [american nor port] (nor) {}
%		(-0.7,-0.8) node  {NAND}
		(nor.in 2) -- ++(-1,0) node [ocirc] {} node [anchor=east] {C}
		(nor.in 1) -|  (-1.5,1)

		(0,2) node [american and port] (and){}
%		(0-0.7,2-0.8) node  {NOR}
		(and.in 2) -| (-1.5,1) to [short, -o] (-2.4,1) node [anchor=east] {B}
		(and.in 1)	-- ++(-1,0) node [ocirc] {} node [anchor=east] {A}

		(2,1) node [american or port] (or){}
%		(4-0.7,1-0.8) node  {XNOR}
		(and.out) -| (or.in 1)
		(nor.out) -| (or.in 2)

		(3.5,1) node [american not port] (not){}
		(or.out) -- (not.in)
		(not.out) -- ++(1,0) node [ocirc] {} node [anchor=west] {X}


%		(0,2) node [american and port] {}
%		(-0.7,2-0.8) node  {AND}

%		(2,2) node [american or port] {}
%		(2-0.7,2-0.8) node  {OR}

%		(4,2) node [american xor port] {}
%		(4-0.7,2-0.8) node  {XOR}


%		(6.7-0.7,1-0.8) node  {NOT}

	;\end{circuitikz}
%\shorthandon{:!}
	\end{center}
	\label{Q:tv1}
	%circuit
}
{
	\begin{tabular}{ccc|c}
		A & B & C & X \\
		\hline
		0 & 0 & 0 & 0 \\
		0 & 0 & 1 & 1 \\
		0 & 1 & 0 & 1 \\
		0 & 1 & 1 & 1 \\
		1 & 0 & 0 & 0 \\
		1 & 0 & 1 & 1 \\
		1 & 1 & 0 & 0 \\
		1 & 1 & 1 & 0 \\
		\end{tabular}

}
\end{predet}

%\subsection{Exercices}
\begin{predet}
\Question{
	En utilisant une table de vérité, démontrez que ce circuit est un «~voteur~»~:
	%circuit
	\begin{center}
%\shorthandoff{:!}
		\begin{circuitikz} \draw
		(0,0) node [american and port] (and1) {}
%		(-0.7,-0.8) node  {NAND}
		(and1.in 2) -- ++(-0.5,0) |- node [circ] {} ++(-0.5,2.56) node [ocirc] (B) {} node [anchor=east] {B}


		(0,2) node [american or port] (or){}
%		(0-0.7,2-0.8) node  {NOR}
		(or.in 1) -- ++(-0.5,0) |- (B)
		(or.in 2) |- node [circ] {} ++(-1,-0.4) node [ocirc] (C) {} node [anchor=east] {C}
		(and1.in 1) |- (C)

		(2,3) node [american and port] (and2) {}
%		(4-0.7,1-0.8) node  {XNOR}
		(or.out) -| (and2.in 2)
		(and2.in 1) -- ++(-3,0)  node [ocirc] (A) {} node [anchor=east] {A}
		(or.out) -| (and2.in 2)

		(3.5,1) node [american or port] (and3){}
		(and2.out) -| (and3.in 1)
		(and1.out) -| (and3.in 2)
		(and3.out) -- ++(1,0) node [ocirc] {} node [anchor=west] {Y}


%		(0,2) node [american and port] {}
%		(-0.7,2-0.8) node  {AND}

%		(2,2) node [american or port] {}
%		(2-0.7,2-0.8) node  {OR}

%		(4,2) node [american xor port] {}
%		(4-0.7,2-0.8) node  {XOR}


%		(6.7-0.7,1-0.8) node  {NOT}

	;\end{circuitikz}
%\shorthandon{:!}
	\end{center}
	\label{Q:tv2}
}
{
	\begin{tabular}{ccc|c}
		A & B & C & X \\
		\hline
		0 & 0 & 0 & 0 \\
		0 & 0 & 1 & 0 \\
		0 & 1 & 0 & 0 \\
		0 & 1 & 1 & 1 \\
		1 & 0 & 0 & 0 \\
		1 & 0 & 1 & 1 \\
		1 & 1 & 0 & 1 \\
		1 & 1 & 1 & 1 \\
		\end{tabular}
}%R
\end{predet}

\begin{predet}
\Question{
	Comment représenter une porte logique \texttt{AND} à l'aide de deux portes \texttt{NAND} ?
	\label{Q:AND-NAND}
}
{}
\end{predet}

\begin{manip}
\Question{
	Réalisez ce circuit sur le protoboard au moyen de circuits intégrés 74HC00 (\texttt{NAND}) et 74HC32 (\texttt{OR}) (sans utiliser les portes \texttt{NOT}), les brochages se trouvent en annexe.
	\begin{itemize}
	\item Branchez les entrées sur les leds pour visualiser leur état.
	\item Branchez les sorties intermédiaires sur les leds pour vérifier progressivement votre câblage.
	\item Branchez la sortie sur une led pour vérifier son état.
	\item \textbf{N'oubliez pas d'alimenter vos circuits logiques en 5V !}
	\end{itemize}

	\begin{astuce}
		Placez bien vos portes logiques \textit{à cheval} sur la travée du protobard.
		N'oubliez pas de connecter une résistance en série de votre LED pour la protéger !
	\end{astuce}
	\label{Q:2}
}{}
\end{manip}

\begin{manip}
\Question{
	Testez son bon fonctionnement à l'aide des LEDs et des interrupteurs. Vérifier si sa table de vérité correspond à celle déterminée précédemment.
	\label{Q:1}
}{}
\end{manip}




\subsection{Temps de propagation des signaux}

\begin{predet}
\Question{
	Complétez le chronogramme ci-dessous en considérant que la porte \texttt{NOT} a un temps de propagation de 10ns et que la porte \texttt{AND} a un temps de propagation de 20 ns.
	\begin{center}
%\shorthandoff{:!}
		\begin{circuitikz} \draw
		(0,0.72) node [american and port] (and1) {}
%		(-0.7,-0.8) node  {NAND}
		(-3,1) node [american not port, scale=0.8] (not){}
		(and1.in 1) -|   (not.out)

		(not.in) |-  ++(-0.5,0) node [ocirc] (A) {} node [anchor=east] {A}
		(and1.in 2) |- ++(-2.66,0) node [ocirc] (B) {} node [anchor=east] {B}
		(and1.out) -- ++(1,0) node [ocirc] (Y) {} node [anchor=west] {Y}

		;\end{circuitikz}
%\shorthandon{:!}
%\shorthandoff{:!}

		\begin{tikzpicture}[minimum size= 1.25cm,scale=0.9]
		%\usetikzlibrary{arrows,decorations.markings}
		%\def \n {5}
		%\def \radius {3cm}
		%\def \margin {8} % margin in angles, depends on the radius
		\usetikzlibrary{calc}
		%\usetikzlibrary{arrows.meta}
		%\foreach \s in {1,...,\n}
		{
			%\tikzset{>={Latex[width=3mm,length=3mm]}}
			%/pgf/;
			\draw   [->]  (0,0) -- (0,1);
			\node [anchor=east] at (0,1) {A};
			\draw [->]( 0,0) -- (10.5,0);
			\node [anchor=west] at (10.5,0) {t};

			\foreach \x in {1,2,...,10} {\draw (\x,-0.1) -- (\x,0.1);}
			\foreach \x in {1,2,...,10} {\draw (\x,-0.1-2) -- (\x,0.1-2);}
			\foreach \x in {1,2,...,10} {\draw (\x,-0.1-4) -- (\x,0.1-4);}
			\node [anchor=north, inner sep=0pt, outer sep=0pt] at (1,0.25) {10ns};
			\node [anchor=north, inner sep=0pt, outer sep=0pt] at (2,0.25) {20ns};

			\draw [->] (0,-2) -- (0,1-2);
			\node [anchor=east] at (0,1-2) {B};
			\draw [->] (0,-2) -- (10.5,-2);
			\node [anchor=west] at (10.5,-2) {t};

				\draw [->] (0,-4) -- (0,1-4);
			\node [anchor=east] at (0,1-4) {Y};
			\draw [->] (0,-4) -- (10.5,-4);
			\node [anchor=west] at (10.5,-4) {t};

			\draw [line width=2pt] (0,0) -|(3,1) -| (10,1); %A
			\draw [line width=2pt] (0,0-2) -|(1,1-2) -| (5,0-2) -- (10,0-2); %B

			\itgv{
				\draw [line width=2pt, color=darkblue] (0,-4) -| (3,1-4) -|(6,0-4)--(10,0-4); %Y
			}
		}
		\end{tikzpicture}
		\label{Q:chrono}
	\end{center}
	%diagramme
	\label{Q:3}
}{}
\end{predet}

\begin{manip}
Vous allez à présent mesurer le temps de propagation de l'une de vos portes \texttt{OR} à l'aide de l'oscilloscope.
À cette fin, vous allez brancher une sonde à la sortie de l'interrupteur et une seconde à la sortie de la porte logique.
Lorsqu'elle changera de l'état bas à l'état haut, vous pourrez observer l'écart entre les deux signaux qui est dû au délai de propagation du composant.

Voici le montage que vous devez réaliser :

\begin{center}
	\begin{circuitikz} \draw 

	(0,0) node [american or port] (or) {\small{\texttt{OR}}}

	(-3,0.3) node[cute spdt mid arrow,xscale=-1] (sw) {}

	($(sw.out 1)-(1,0)$) node {\texttt{+5 V}} % 5V label
	(sw.out 1) node[rground, yscale=-1, rotate=-90] (alim) {} % 5V alim

	(or.in 1) node[circle,fill,inner sep=1.5pt] () {}
	(or.in 1) to [bend left] ($(or.in 1)+(1,1)$) node [right] (chanA) {\texttt{Canal A}}

	(sw.out 2) node [ground, rotate=-90] {} % ground
	(sw.in) -- (or.in 1)

	($(or.in 2)-(0.5,0)$) node [ground] {} to (or.in 2)

	(or.out) node[circle,fill, inner sep=1.5pt] () {}
	(or.out) to [bend right] ($(or.out)+(1,-0.5)$) node [right] (chanB) {\texttt{Canal B}}
	(or.out) to [short] ($(or.out)+(0.5,0)$)

	;\end{circuitikz}
\end{center}

Configurez le logiciel du Picoscope de la façon suivante~:
\begin{center}
	\begin{tabular}{rlp{0.5\textwidth}}
		Paramètre & Réglage & Commentaire \\\toprule
		Trigger & Single & On ne veut faire qu’une seule acquisition. \\\midrule
		Trigger Channel & A & C'est au changement d'état du canal A que l'acquisition doit démarrer. \\\midrule
		Rising Edge & & On veut observer une transition de l'état bas (0 V) vers l'état haut (5 V). \\\midrule
		Threshold & 3 V & Lorsque le canal A atteint 3 V sur un flanc montant, l'acquisition doit être déclenchée. \\\midrule
		Pre-Trigger & 50~\% & Le déclenchement de l'acquisition sera au milieu de la fenêtre~: 50~\% avant et 50~\% après. \\\midrule
		Échelle temporelle & 200 ns/div &  \\\bottomrule
	\end{tabular}
\end{center}

Vous devriez voir le bandeau suivant en bas de votre fenêtre~:
\begin{figure}[H]
	\centering
	\includegraphics{trigger-pico-config.png}
\end{figure}

\Question{\label{q:mesure-delai}
	Préparez votre prise de mesure~:
	\begin{itemize}
		\item Placez l'interrupteur en position « 0 V ».
		\item Appuyez sur « Go » dans le logiciel~: \includegraphics{pico-go.png}
		\item Passez l'interrupteur à « 5 V ».
	\end{itemize}

	Mesurez le délai de propagation lorsque les signaux passent à 2.5~V.

	\begin{astuce}
		Veillez à utiliser les mêmes types de sonde pour les deux canaux afin de limiter les écarts de mesure.
	\end{astuce}
}{}

\Question{
	Quelle est la valeur \textit{typique} renseignée dans les caractéristiques dynamiques de la fiche technique du \texttt{74HC32} ?
	\begin{astuce}
		Aidez-vous des chronogrammes schématiques se trouvant dans la fiche technique, ils expliquent les acronymes utilisés.
	\end{astuce}
}{6 ns à 25°C et avec un CL de 15pf.
On peut trouve l'input capacitance de la sonde de l'oscillo dans la datasheet du picoscope 2204A, elle est de 1Mohm//15pF +- 2pF.}

\Question{
	Quelle est le plus petit intervalle de temps que vous pouvez mesurer avec le picoscope 2204A ?
	\begin{astuce}
		Vous trouverez la réponse dans sa \href{https://www.picotech.com/oscilloscope/2000/picoscope-2000-specifications}{fiche technique}. On y indique notamment qu'il peut capturer 100 millions d'échantillons par seconde (100MS/s), lorsqu'un seul canal est utilisé. Si les deux canaux sont utilisés simultanément, on descend à 50MS/s.
	\end{astuce}
}{10 ns}

\Question{
	À la lumière de ces résultats, critiquez la pertinence de votre mesure à la question~\ref{q:mesure-delai}.
}{}

\Question{
	En supposant les délais de propagation identiques entre les différentes portes logiques d'un même package \texttt{74HC32}, connectez quatre portes \texttt{OR} en série et calculez le temps de propagation moyen à l'aide d'une nouvelle mesure.

	\begin{center}
		\begin{circuitikz} \draw 
	
		(0,0) node [american or port] (or) {\small{\texttt{OR}}}
	
		(-3,0.3) node[cute spdt mid arrow,xscale=-1] (sw) {}
	
		($(sw.out 1)-(1,0)$) node {\texttt{+5 V}} % 5V label
		(sw.out 1) node[rground, yscale=-1, rotate=-90] (alim) {} % 5V alim
	
		(or.in 1) node[circle,fill,inner sep=1.5pt] () {}
		(or.in 1) to [bend left] ($(or.in 1)+(1,1)$) node [right] (chanA) {\texttt{Canal A}}
	
		(sw.out 2) node [ground, rotate=-90] {} % ground
		(sw.in) -- (or.in 1)
	
		($(or.in 2)-(0.5,0)$) node [ground] {} to (or.in 2)

		(or.out) node [american or port, anchor=in 1] (or2) {\small{\texttt{OR}}}
		(or2.out) node [american or port, anchor=in 1] (or3) {\small{\texttt{OR}}}
		(or3.out) node [american or port, anchor=in 1] (or4) {\small{\texttt{OR}}}
	
		($(or2.in 2)-(0.5,0)$) node [ground] {} to (or2.in 2)
		($(or3.in 2)-(0.5,0)$) node [ground] {} to (or3.in 2)
		($(or4.in 2)-(0.5,0)$) node [ground] {} to (or4.in 2)
	
		(or4.out) node[circle,fill, inner sep=1.5pt] () {}
		(or4.out) to [bend left] ($(or4.out)+(1,+1)$) node [right] (chanB) {\texttt{Canal B}}
		(or4.out) to [short] ($(or4.out)+(0.5,0)$)
		;\end{circuitikz}
	\end{center}
}{}

\end{manip}
% \begin{manip}
% \Question{
% 	Mettez en évidence le temps de propagation sur le circuit \textit{de la question~\ref{Q:tv2}}.
% 	\begin{itemize}
% 	% \item Branchez $A$ sur l'entrée de synchronisation de l'oscilloscope et l'utiliser pour le déclenchement de l'oscilloscope,
% 	% \item brancher la sortie de $A\cdot(B+C)$ sur \verb!CH1!,
% 	% \item brancher $Y$ sur \verb!CH2!,
% 	% \item utiliser les curseurs et le retard par rapport au déclenchement pour déterminer les temps de propagation.
% 	\item Branchez une sonde de l'oscilloscope à la sortie de l'interrupteur \texttt{A},
% 	\item branchez la deuxième sonde à la sortie de la porte \texttt{AND} connectée à \texttt{A},
% 	\item réglez le niveau de déclenchement du picoscope sur une pente montate du channel A (connecté à l'interrupteur A).
% 	\end{itemize}%Utiliser l'entrée de synchronisation de l'oscilloscope comme référence.
% 	\label{Q:1}
% }{}
% \end{manip}

\newpage
\section{Logique séquentielle, mémorisation}

\begin{info}
Les bistables sont des circuits très employés en électronique numérique en raison de leur multiples applications. Leur première fonction est de mémoriser une information logique.

Les bistables sont des circuits \textbf{séquentiels}, c'est à dire que leur sortie dépend des entrées \textbf{et} de l'état précédent du système. Contrairement aux circuits combinatoires de la section précédente, l'état actuel du système dépend de son passé.
\end{info}

\subsection{Bistable élémentaire}

\begin{info}
Ci-dessous est représenté sous 2 formes différentes le bistable le plus simple.


\begin{center}
		\begin{circuitikz} \draw
		(0,0) node [american not port] (not3) {}
		(2,0) node [american not port] (not4) {}
		(not3.out) -- (not4.in)
		(not4.out) -- ++(0.5,0) |- ++(-4,-1) |- (not3.in)
		(not3.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$\overline{Q}$}
		(not4.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$Q$}

		(8,1) node [american not port] (not1) {}
		(8,-1) node [american not port] (not2) {}
%		(not1.out) -- (not2.in)
	%	(not2.out) -| ++(0.5,0.5)  coordinate (a-a) to [kinky cross=(a-a)--(a-b), kinky crosses=left] ++(-3,1)  coordinate (a-b) |- (not1.in)
		(not1.out)  ++(0.5,-0.5)  coordinate (a-a) %coords of the crossing wire
		(not2.in)  ++(-1,0.5)  coordinate (a-b)

		(not1.in)++(-1.27,-0.5) node (in) {} % end of the wire with kinky bump
		(not2.out)-| ++(0.5,0.5) to  [kinky cross=(a-a)--(a-b), kinky crosses=left] (in)
		(not1.in)-| ++(-1.14,-0.55)
		(not2.out) -- ++(1,0) node [circ] () {} node [anchor=south] {$\overline{Q}$}

		(not1.out) -| ++(0.5,-0.5) -- ++(-3.043,-1) |- (not2.in)
		(not1.out) -- ++(1,0) node [circ] () {} node [anchor=south] {$Q$}
%		(not1.out) |-  ++(0.25,0)
%		(not2.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$Q$}

	;\end{circuitikz}
\end{center}
%schéma

%\newpage
Ce bistable possède 2 états stables (d'où son nom) :
\begin{itemize}
\item soit $Q$ est à l'état haut (1) et $\overline{Q}$ est à l'état bas (0)
\item soit $Q$ est à l'état bas  (0) et $\overline{Q}$ est à l'état haut (1)
\end{itemize}

Ce circuit est donc une mémoire. Malheureusement, il est difficile de modifier son état autrement
qu'en court-circuitant une des sortie à un état déterminé: il n'y a en effet pas d'entrée à ce circuit.
\end{info}

\subsection{Amélioration}
\begin{info}
Imaginons que l'on dispose d'inverseurs dont on peut mettre la sortie dans un état déterminé. Par
exemple l'inverseur suivant :

%schéma

\begin{center}
\begin{circuitikz} \draw

		(0,0) node [american not port] (not1) {}
		(not1)+(0,.25) |- ++(-1.7,1) node [ocirc] () {} node [anchor=south] {$B$}
		(not1.in) -- ++(-1,0) node [ocirc] () {} node [anchor=south] {$A$}
		(not1.out) -- ++(1,0) node [ocirc] () {} node [anchor=south] {$Q$}

	;\end{circuitikz}

\end{center}
\begin{itemize}
\item si B est à l'état bas, alors Q est l'inverse de A (inversion normale de A)
\item si B est à l'état haut, alors Q est à l'état bas (par exemple)
\end{itemize}

On peut alors réaliser le montage suivant :

%schéma
\begin{center}
\begin{circuitikz} \draw
		(0,0) node [american not port] (not3) {}
		(not3)+(0,.25) |- ++(-0.7,1) node [ocirc] () {} node [anchor=south] {$B1$}
		(2,0) node [american not port] (not4) {}
		(not4)+(0,.25) |- ++(-0.7,1) node [ocirc] () {} node [anchor=south] {$B2$}
		(not3.out) -- (not4.in)
		(not4.out) -- ++(0.5,0) |- ++(-4,-1) |- (not3.in)
		(not3.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$\overline{Q}$}
		(not4.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$Q$}

		(8,1) node [american not port] (not1) {}
		(not1)+(0,0.25) |- ++(-0.7,1) node [ocirc] () {} node [anchor=south] {$B2$}
		(8,-1) node [american not port] (not2) {}
		(not2)+(0,-0.25) |- ++(-0.7,-1) node [ocirc] () {} node [anchor=north] {$B1$}
%		(not1.out) -- (not2.in)
	%	(not2.out) -| ++(0.5,0.5)  coordinate (a-a) to [kinky cross=(a-a)--(a-b), kinky crosses=left] ++(-3,1)  coordinate (a-b) |- (not1.in)
		(not1.out)  ++(0.5,-0.5)  coordinate (a-a) %coords of the crossing wire
		(not2.in)  ++(-1,0.5)  coordinate (a-b)

		(not1.in)++(-1.27,-0.5) node (in) {} % end of the wire with kinky bump
		(not2.out)-| ++(0.5,0.5) to  [kinky cross=(a-a)--(a-b), kinky crosses=left] (in)
		(not1.in)-| ++(-1.14,-0.55)
		(not2.out) -- ++(1,0) node [ocirc] () {} node [anchor=south] {$\overline{Q}$}

		(not1.out) -| ++(0.5,-0.5) -- ++(-3.043,-1) |- (not2.in)
		(not1.out) -- ++(1,0) node [ocirc] () {} node [anchor=south] {$Q$}
%		(not1.out) |-  ++(0.25,0)
%		(not2.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$Q$}

	;\end{circuitikz}
\end{center}

On peut maintenant réaliser les opérations suivantes :
\begin{itemize}
\item mettre l'entrée B2 à l'état haut et l'entrée B1 à l'état bas : la sortie Q est alors mise à l'état bas.
\item mettre l'entrée B2 à l'état bas et l'entrée B1 à l'état haut : la sortie Q est alors mise à l'état haut.
\item  mettre les 2 entrées B1 et B2 à l'état bas : le circuit reste dans sont état précédant : c'est la
mémorisation.
\end{itemize}


Le cas où les 2 entrées B1 et B2 sont à l'état haut n'est pas intéressant : il force les 2 sorties $Q$ et $\overline{Q}$ à
l'état bas. C'est un cas indésirable.
\end{info}



\subsection{Bistable RS}
\begin{info}
Vous connaissez déjà des éléments logiques qui répondent à l'inverseur spécial vu ci-dessus.


Prenons par exemple la porte NOR (Non OU).

%schéma

\begin{center}
\begin{circuitikz} \draw

		(0,0) node [american nor port] (nor) {}
%		(not1)+(0,.25) |- ++(-1.7,1) node [ocirc] () {} node [anchor=south] {$B$}
		(nor.in 1) -- ++(-1,0) node [ocirc] () {} node [anchor=east] {$A$}
		(nor.in 2) -- ++(-1,0) node [ocirc] () {} node [anchor=east] {$B$}
		(nor.out) -- ++(1,0) node [ocirc] () {} node [anchor=west] {$Q$}

	;\end{circuitikz}

\end{center}

Cette porte répond parfaitement à la table de vérité de l'inverseur spécial : si son entrée B est à l'état
haut, la sortie Q est forcée à l'état bas ; sinon, la sortie Q est l'inverse de l'entrée A.
Construisons alors le bistable à partir de ces portes et renommons (S, R) les entrées (B1, B2).

%schéma

\begin{center}
\begin{circuitikz} \draw
		(0,1) node [american nor port] (nor1) {}
	%	(nor1)+(0,0.25) |- ++(-0.7,1) node [ocirc] () {} node [anchor=south] {$B2$}
		(0,-1.5) node [american nor port] (nor2) {}
	%	(nor2)+(0,-0.25) |- ++(-0.7,-1) node [ocirc] () {} node [anchor=north] {$B1$}
%		(not1.out) -- (not2.in)
	%	(not2.out) -| ++(0.5,0.5)  coordinate (a-a) to [kinky cross=(a-a)--(a-b), kinky crosses=left] ++(-3,1)  coordinate (a-b) |- (not1.in)
		(nor1.out)  ++(0.5,-0.5)  coordinate (a-a) %coords of the crossing wire
		(nor2.in 2)  ++(-1.5,0.5)  coordinate (a-b)

		(nor1.in 2)++(-1.135,-0.225) node (in) {} % end of the wire with kinky bump
		(nor2.out)-| ++(0.5,0.5) to  [kinky cross=(a-a)--(a-b), kinky crosses=left] (in)
		(nor1.in 2)-| ++(-1,-0.3)
		(nor1.out) -- ++(1.5,0) node [ocirc] () {} node [anchor=west] {$\overline{Q}$}

		(nor1.out) -| ++(0.5,-0.5) -- ++(-3.043,-1.5) |- (nor2.in 1)
		(nor2.out) -- ++(1.5,0) node [ocirc] () {} node [anchor=west] {$Q$}
		(nor1.out) |-  ++(0.25,0)
		%(nor2.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$Q$}

		(nor1.in 1) -- ++(-2,0) node [ocirc] () {} node [anchor=east] {$S$}
		(nor2.in 2) -- ++(-2,0) node [ocirc] () {} node [anchor=east] {$R$}

	;
	\draw [dashed](-2.75,-2.25) rectangle (1,1.75);
	\end{circuitikz}
\end{center}

\begin{itemize}
\item Pour mettre la sortie Q à l'état bas, il suffit d'appliquer un état haut à l'entrée R (Reset : mise à l'état bas)
et un état bas à l'entrée S (Set : mise à l'état haut)
\item Pour mettre la sortie Q à l'état haut, il suffit d'appliquer un état haut à l'entrée S (Set : mise à l'état haut)
et un état bas à l'entrée R (Reset : mise à l'état bas)
\item Pour être en mémorisation, il suffit d'appliquer un état bas aux 2 entrées.
\end{itemize}


Si on appelle l'état bas le niveau inactif et l'état haut le niveau actif, alors on peut dire :
\begin{itemize}
\item pour mettre le bistable dans un état déterminé, il suffit d'appliquer un niveau actif à l'entrée
correspondante.
\item pour mettre le bistable en mémorisation, il suffit de ne mettre aucun niveau actif
\item l'état indésirable a lieu lorsqu'on demande au bistable en même temps une mise à l'état haut et une mise
à l'état bas.
\end{itemize}
\end{info}

\subsection{Table de vérité du bistable R-S}

\begin{info}
Si on n'est pas convaincu par les développements précédents, on peut écrire la table de vérité du
bistable R-S :

%table
\begin{center}
\begin{tabular}{cccc|cc}
R & S & $Q_n$ & $\overline{Q_n}$ & $Q_{n+1}$ & $\overline{Q_{n+1}}$ \\
\hline
0 & 0 & 0 & 0 & ? & ? \\
0 & 0 & 0 & 1 & 0 & 1 \\
0 & 0 & 1 & 0 & 1 & 0 \\
0 & 0 & 1 & 1 &  \multicolumn{2}{c}{interdit} \\
0 & 1 & 0 & 0 & 1 & 0 \\
0 & 1 & 0 & 1 & 1 & 0 \\
0 & 1 & 1 & 0 & 1 & 0 \\
0 & 1 & 1 & 1 & \multicolumn{2}{c}{interdit}  \\
1 & 0 & 0 & 0 & 0 & 1 \\
1 & 0 & 0 & 1 & 0 & 1 \\
1 & 0 & 1 & 0 & 0 & 1 \\
1 & 0 & 1 & 1 & \multicolumn{2}{c}{interdit}  \\
1 & 1 & 0 & 0 & 0 & 0 \\
1 & 1 & 0 & 1 & 0 & 0 \\
1 & 1 & 1 & 0 & 0 & 0 \\
1 & 1 & 1 & 1 & \multicolumn{2}{c}{interdit}  \\
\end{tabular}
\end{center}

En entrée de la table, on met les 2 sorties stables à l'instant t et les entrée que l'on applique à ce
même instant. En sortie de la table, on détermine l'état des 2 sorties à l'instant $t+t_p$, c'est-à-dire après le
temps de propagation du bistable.
Cette table de vérité peut être simplifiée, en effet, les états interdits ne sont pas à prendre en
considération puisqu'ils ne seront jamais rencontrés. Il ne faut cependant pas confondre état
interdit en entrée (lignes « interdits ») et état indéterminé en sortie (ligne 1). La table devient:


%table
\begin{center}
\begin{tabular}{cccc|cc}
R & S & $Q_n$ & $\overline{Q_n}$ & $Q_{n+1}$ & $\overline{Q_{n+1}}$ \\
\hline
0 & 0 & 0 & 0 & ? & ? \\
0 & 0 & 0 & 1 & 0 & 1 \\
0 & 0 & 1 & 0 & 1 & 0 \\
0 & 1 & X & X & 1 & 0 \\
1 & 0 & X & X & 0 & 1 \\
1 & 1 & X & X & 0 & 0 \\
\end{tabular}
\end{center}

Le dernier état est évidemment indésirable puisqu'il rend égales des sorties normalement
complémentaires (l'ordre donné au bistable est incohérent). Si on évite cet état, on peut supprimer la
dernière ligne du tableau ainsi que la première. On peut alors simplifier cette table pour avoir :


%table
\begin{center}
\begin{tabular}{cc|cc}
R & S & $Q_{n+1}$ & $\overline{Q_{n+1}}$ \\
\hline & & & \\[-1em]
0 & 0 & $Q_n$ & $\overline{Q_n}$ \\
0 & 1 & 1 & 0 \\
1 & 0 & 0 & 1 \\
\end{tabular}
\end{center}


De cette table, on retire heureusement les mêmes conclusions que précédemment.
La méthode par table de vérité est assez lourde dans son entièreté. Il vaut donc mieux essayer
d'établir directement la table simplifiée comme vu précédemment.
\end{info}

\subsection{Réalisation du bistable R-S}
%Réaliser le schéma suivant à l'aide de portes logiques :
Soit le circuit suivant :

%schéma

\begin{center}
\begin{circuitikz} \draw
		(0,1) node [american nand port] (nor1) {}
	%	(nor1)+(0,0.25) |- ++(-0.7,1) node [ocirc] () {} node [anchor=south] {$B2$}
		(0,-1.5) node [american nand port] (nor2) {}
	%	(nor2)+(0,-0.25) |- ++(-0.7,-1) node [ocirc] () {} node [anchor=north] {$B1$}
%		(not1.out) -- (not2.in)
	%	(not2.out) -| ++(0.5,0.5)  coordinate (a-a) to [kinky cross=(a-a)--(a-b), kinky crosses=left] ++(-3,1)  coordinate (a-b) |- (not1.in)
		(nor1.out)  ++(0.5,-0.5)  coordinate (a-a) %coords of the crossing wire
		(nor2.in 2)  ++(-1.5,0.5)  coordinate (a-b)

		(nor1.in 2)++(-1.135,-0.225) node (in) {} % end of the wire with kinky bump
		(nor2.out)-| ++(0.5,0.5) to  [kinky cross=(a-a)--(a-b), kinky crosses=left] (in)
		(nor1.in 2)-| ++(-1,-0.3)
		(nor1.out) -- ++(1.5,0) node [ocirc] () {} node [anchor=west] {$Q$}

		(nor1.out) -| ++(0.5,-0.5) -- ++(-3.043,-1.5) |- (nor2.in 1)
		(nor2.out) -- ++(1.5,0) node [ocirc] () {} node [anchor=west] {$\overline{Q}$}
		(nor1.out) |-  ++(0.25,0)
		%(nor2.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$Q$}

		(nor1.in 1) -- ++(-2,0) node [ocirc] () {} node [anchor=east] {$\overline{S}$}
		(nor2.in 2) -- ++(-2,0) node [ocirc] () {} node [anchor=east] {$\overline{R}$}

	;
	\draw [dashed](-2.75,-2.25) rectangle (1,1.75);
	\end{circuitikz}
\end{center}

\begin{predet}
\Question{
	Quel est l'état des entrées qui assure la fonction de mémorisation ?
	\label{Q:rs_deb}
}{
	$\overline{R}, \overline{S} = (1, 1)$
}
\end{predet}

\begin{predet}
\Question{
	Que faut il appliquer au circuit pour réaliser un Set ou Reset ?
	\label{Q:1}
}{
	\begin{tabular}{rcc}
	& $\overline{S}$ & $\overline{R}$ \\
	Set : & 0 & 1 \\
	Reset : & 1 & 0
	\end{tabular}
}
\end{predet}

\begin{predet}
\Question{
	Quelle est l'anomalie des sorties lorsque les deux entrées sont à l'état bas ?
	\label{Q:1}
}{
	$Q = \overline{Q} = 1$, alors que les deux sorties devraient être complémentaires.
}
\end{predet}


\begin{predet}
\Question{
	Donnez à chaque valeur des entrées ($\overline{R}$, $\overline{S}$) une appellation parmi les suivantes :
	\begin{itemize}
	\item mémorisation
	\item mise à 0
	\item mise à 1
	\item indésirable
	\end{itemize}
	\label{Q:1}
}{
	\begin{itemize}
	\item mémorisation : ($\overline{R}$, $\overline{S}$) = (1, 1)
	\item mise à 0 : ($\overline{R}$, $\overline{S}$) = (0, 1)
	\item mise à 1 : ($\overline{R}$, $\overline{S}$) = (1, 0)
	\item indésirable : ($\overline{R}$, $\overline{S}$) = (0, 0)
	\end{itemize}
}
\end{predet}

\begin{predet}
\Question{
	Justifiez appellation R-S. Quel est le niveau logique actif de ces 2 entrées ?
	\label{Q:1}
}{
	(R : Reset S : Set) et dans la configuration proposée (avec des portes \texttt{NAND}), les entrées sont actives à l'état bas.
}
\end{predet}

\begin{predet}
\Question{
	Pourquoi parle-t-on d'entrées en logique inverse ?
	\label{Q:1}
}{
	La description habituelle d'un bistable R-S part de la description avec des portes \texttt{NOR}.
	Si le bistables est réalisé avec des portes \texttt{NAND}, toute la logique est \textbf{inversée}.
}
\end{predet}

\begin{predet}
\Question{
	Que pourrait-il se passer si on passe de l'état [mise à 1] à l'état [mémorisation] en passant transitoirement
par l'état [indésirable] ?
	\label{Q:rs_fin}
}{
	Les deux sorties seraient actives en même temps. Tant que cette situation est \textit{transitoire}, ce n'est pas un problème majeur.
}
\end{predet}

\begin{manip}
\Question{
	Réalisez le circuit ci-dessus sur le protoboard et vérifier vos conclusions des questions~\ref{Q:rs_deb} à~\ref{Q:rs_fin}.
	\label{Q:1}
}{}
\end{manip}

%FIXME TODO style pour les états

\subsection{Bistable R-S avec entrée d'activation (Enable)}

\begin{manip}
Modifiez le schéma précédent comme suit :
%schéma

\begin{center}
\begin{circuitikz} \draw
		(0,1.28) node [american nand port] (nand1) {}
		(0,-1.5-0.28) node [american nand port] (nand2) {}

		(nand1.in 1) -- ++(-1.5,0) node [ocirc] () {} node [anchor=east] {$S$}
		(nand2.in 2) -- ++(-1.5,0) node [ocirc] () {} node [anchor=east] {$R$}

%		(nand1.in 2)
		(nand1.in 2) |- ++(-1.5,-1.28) coordinate (dot) node [ocirc] () {} node [anchor=east] {$E$}
		(nand2.in 1) |- (dot)

		(3,1) node [american nand port] (nor1) {}
	%	(nor1)+(0,0.25) |- ++(-0.7,1) node [ocirc] () {} node [anchor=south] {$B2$}
		(3,-1.5) node [american nand port] (nor2) {}
	%	(nor2)+(0,-0.25) |- ++(-0.7,-1) node [ocirc] () {} node [anchor=north] {$B1$}
%		(not1.out) -- (not2.in)
	%	(not2.out) -| ++(0.5,0.5)  coordinate (a-a) to [kinky cross=(a-a)--(a-b), kinky crosses=left] ++(-3,1)  coordinate (a-b) |- (not1.in)
		(nor1.out)  ++(0.5,-0.5)  coordinate (a-a) %coords of the crossing wire
		(nor2.in 2)  ++(-1.5,0.5)  coordinate (a-b)

		(nor1.in 2)++(-1.135,-0.225) node (in) {} % end of the wire with kinky bump
		(nor2.out)-| ++(0.5,0.5) to  [kinky cross=(a-a)--(a-b), kinky crosses=left] (in)
		(nor1.in 2)-| ++(-1,-0.3)
		(nor1.out) -- ++(1.5,0) node [ocirc] () {} node [anchor=west] {$Q$}

		(nor1.out) -| ++(0.5,-0.5) -- ++(-3.043,-1.5) |- (nor2.in 1)
		(nor2.out) -- ++(1.5,0) node [ocirc] () {} node [anchor=west] {$\overline{Q}$}
		(nor1.out) |-  ++(0.25,0)
		%(nor2.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$Q$}

		%(nor1.in 1) -- ++(-2,0) node [ocirc] () {} node [anchor=east] {$\overline{S}$}
		%(nor2.in 2) -- ++(-2,0) node [ocirc] () {} node [anchor=east] {$\overline{R}$}
		(nor1.in 1) -| (nand1.out)
		(nor2.in 2) -| (nand2.out)

	;
%	\draw [dashed](-2.75,-2.25) rectangle (1,1.75);
	\end{circuitikz}
\end{center}

\Question{
	Mettez en évidence l'avantage de l'entrée enable du point de vue des modifications des entrées R et S.
	\label{Q:dl1}
}{}

\Question{
	Constatez que vous pouvez encore atteindre l'état « interdit » $Q = \overline{Q}$.
	\begin{astuce}
		On parle d'état «~interdit~» parce que les sorties $Q$ et $\overline{Q}$ doivent être complémentaires (opposées) par convention.
	\end{astuce}
}{}
\end{manip}


\subsection{D latch}

\begin{info}
Le D latch peut être réalisé avec le schéma suivant :
%schéma

\begin{center}
\begin{circuitikz} \draw
		(0,1.28) node [american nand port] (nand1) {}
		(0,-1.5-0.28) node [american nand port] (nand2) {}

		(nand1.in 1) -- ++(-2.5,0) node [ocirc] (D) {} node [anchor=east] {$D$}
%		(nand2.in 2) -- ++(-1.5,0) node [ocirc] () {} node [anchor=east] {$S$}
		(-2.25,-2.07) node [american not port] (not) {}
		(D) -| (not.in)
		(not.out) --	(nand2.in 2)
%		(nand1.in 2)
		(D)++(0.94,0) coordinate (Dvert) %pour avoir seulement le segment vertical pour calculer l'intersection
		(nand1.in 2) |- ++(-1.25,-1.28) coordinate (dot)
		(dot) to [kinky cross=(Dvert)--(not.in), kinky crosses=left] ++(-1.25,0)node [ocirc] () {} node [anchor=east] {$E$}
		(nand2.in 1) |- (dot)

		(3,1) node [american nand port] (nor1) {}
	%	(nor1)+(0,0.25) |- ++(-0.7,1) node [ocirc] () {} node [anchor=south] {$B2$}
		(3,-1.5) node [american nand port] (nor2) {}
	%	(nor2)+(0,-0.25) |- ++(-0.7,-1) node [ocirc] () {} node [anchor=north] {$B1$}
%		(not1.out) -- (not2.in)
	%	(not2.out) -| ++(0.5,0.5)  coordinate (a-a) to [kinky cross=(a-a)--(a-b), kinky crosses=left] ++(-3,1)  coordinate (a-b) |- (not1.in)
		(nor1.out)  ++(0.5,-0.5)  coordinate (a-a) %coords of the crossing wire
		(nor2.in 2)  ++(-1.5,0.5)  coordinate (a-b)

		(nor1.in 2)++(-1.135,-0.225) node (in) {} % end of the wire with kinky bump
		(nor2.out)-| ++(0.5,0.5) to  [kinky cross=(a-a)--(a-b), kinky crosses=left] (in)
		(nor1.in 2)-| ++(-1,-0.3)
		(nor1.out) -- ++(1.5,0) node [ocirc] () {} node [anchor=west] {$Q$}

		(nor1.out) -| ++(0.5,-0.5) -- ++(-3.043,-1.5) |- (nor2.in 1)
		(nor2.out) -- ++(1.5,0) node [ocirc] () {} node [anchor=west] {$\overline{Q}$}
		(nor1.out) |-  ++(0.25,0)
		%(nor2.out) |-  ++(0.25,0) node [circ] () {} node [anchor=south] {$Q$}

		%(nor1.in 1) -- ++(-2,0) node [ocirc] () {} node [anchor=east] {$\overline{S}$}
		%(nor2.in 2) -- ++(-2,0) node [ocirc] () {} node [anchor=east] {$\overline{R}$}
		(nor1.in 1) -| (nand1.out)
		(nor2.in 2) -| (nand2.out)

	;
	\draw [dashed](-3.5,-3.25) rectangle (4.25,2.75);
	\end{circuitikz}
\end{center}


L'inverseur en tête du montage a pour effet de supprimer l'état illicite du bistable R-S de sortie.
\end{info}

\begin{predet}
\Question{
	 Déterminez son fonctionnement (table de vérité simplifiée).

	\label{Q:dlatch}
}{
	\begin{tabular}{cc|cc}
	D & E & $Q_{n+1}$ & $\overline{Q_{n+1}}$ \\ \hline
	0 & 0 & $Q_n$ & $\overline{Q_n}$ \\
	0 & 1 & 0 & 1 \\
	1 & 0 & $Q_n$ & $\overline{Q_n}$ \\
	1 & 1 & 1 & 0
	\end{tabular}
}
\end{predet}

\begin{manip}
\Question{
	Réalisez le D LATCH à l'aide de portes logiques. Le circuit 74HC04 contient 6 inverseurs (portes \texttt{NOT}).
	Vérifiez que votre circuit reproduit bien le fonctionnement attendu.
	\label{Q:1}
}{}
\end{manip}

\begin{predet}
\Question{
	Peut-on, à votre avis, modifier D n'importe quand sans peur de provoquer une sortie «~interdite~» ?
	\label{Q:1}
}{}
\end{predet}

\clearpage
\appendix
\section{Brochages}
%\subsection{74HC00 : 4$\times$2-NAND}

\begin{center}
		\begin{circuitikz}[scale=0.8] \draw
		(4,2.5) node [anchor=center] {$74HC00, 4\cdot NAND$}
		(2.8,1.5) node [american nand port,scale=0.8] (nand1) {}
		(1,0) node (in11) {}
		(2,0) node (in12) {}
		(3,0) node (out1) {}
		(in11) |- (nand1.in 1)
		(in12) |- ++(-0.6,0.75)|- (nand1.in 2)
		(out1) |- (nand1.out)

		(2.8+3,1.5) node [american nand port,scale=0.8] (nand2) {}
		(1+3,0) node (in21) {}
		(2+3,0) node (in22) {}
		(3+3,0) node (out2) {}
		(in21) |- (nand2.in 1)
		(in22) |- ++(-0.6,0.75)|- (nand2.in 2)
		(out2) |- (nand2.out)


		(1+2.8,5-1.5) node [american nand port,scale=0.8] (nand3) {}
		(1+1,5) node (in31) {}
		(2+1,5) node (in32) {}
		(3+1,5) node (out3) {}
		(in31) |- (nand3.in 2)
		(in32) |- ++(-0.6,-0.75)|- (nand3.in 1)
		(out3) |- (nand3.out)

		(1+2.8+3,5-1.5) node [american nand port,scale=0.8] (nand4) {}
		(2+3,5) node (in41) {}
		(3+3,5) node (in42) {}
		(4+3,5) node (out4) {}
		(in41) |- (nand4.in 2)
		(in42) |- ++(-0.6,-0.75)|- (nand4.in 1)
		(out4) |- (nand4.out)

		(7,0-0.25) node [anchor=north](gnd) {GND}
		(1,5+0.35) node [anchor=south](vcc) {VCC}

%		(-0.7,-0.8) node  {NAND}
%		(-3,1) node [american not port, scale=0.8] (not){}
%		(and1.in 1) -|   (not.out)

%		(not.in) |-  ++(-0.5,0) node [ocirc] (A) {} node [anchor=east] {A}
%		(and1.in 2) |- ++(-2.66,0) node [ocirc] (B) {} node [anchor=east] {B}
%		(and1.out) -- ++(1,0) node [ocirc] (Y) {} node [anchor=west] {Y}

	;
	\draw (0,0)rectangle (8,5);
	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,-0.15) rectangle (\x+0.25,0.35) (\x,0.1) node {\x};
	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,5-0.15) rectangle (\x+0.25,5+0.35);
	\foreach \x in {8,9,...,14} \draw (15-\x,5+0.1) node {\x};
	\draw (0,2) arc[start angle=-90, end angle=90, radius=0.5];
	\end{circuitikz}
%\end{center}
\hspace{1cm}
%\subsection{74HC32 : 4$\times$2-OR}
%\begin{center}
		\begin{circuitikz}[scale=0.8] \draw
		(4,2.5) node [anchor=center] {$74HC32, 4\cdot  OR$}
		(2.8,1.5) node [american or port,scale=0.8] (or1) {}
		(1,0) node (in11) {}
		(2,0) node (in12) {}
		(3,0) node (out1) {}
		(in11) |- (or1.in 1)
		(in12) |- ++(-0.6,0.75)|- (or1.in 2)
		(out1) |- (or1.out)

		(2.8+3,1.5) node [american or port,scale=0.8] (or2) {}
		(1+3,0) node (in21) {}
		(2+3,0) node (in22) {}
		(3+3,0) node (out2) {}
		(in21) |- (or2.in 1)
		(in22) |- ++(-0.6,0.75)|- (or2.in 2)
		(out2) |- (or2.out)


		(1+2.8,5-1.5) node [american or port,scale=0.8] (or3) {}
		(1+1,5) node (in31) {}
		(2+1,5) node (in32) {}
		(3+1,5) node (out3) {}
		(in31) |- (or3.in 2)
		(in32) |- ++(-0.6,-0.75)|- (or3.in 1)
		(out3) |- (or3.out)

		(1+2.8+3,5-1.5) node [american or port,scale=0.8] (or4) {}
		(2+3,5) node (in41) {}
		(3+3,5) node (in42) {}
		(4+3,5) node (out4) {}
		(in41) |- (or4.in 2)
		(in42) |- ++(-0.6,-0.75)|- (or4.in 1)
		(out4) |- (or4.out)

		(7,0-0.25) node [anchor=north](gnd) {GND}
		(1,5+0.35) node [anchor=south](vcc) {VCC}

	;
	\draw (0,0)rectangle (8,5);
	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,-0.15) rectangle (\x+0.25,0.35) (\x,0.1) node {\x};
	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,5-0.15) rectangle (\x+0.25,5+0.35);
	\foreach \x in {8,9,...,14} \draw (15-\x,5+0.1) node {\x};
	\draw (0,2) arc[start angle=-90, end angle=90, radius=0.5];
	\end{circuitikz}
\end{center}

%\subsection{74HC36 : 4$\times$2-NOR}
%\begin{center}
%		\begin{circuitikz}[scale=0.8] \draw
%		(4,2.5) node [anchor=center] {$74HC36, 4\times NOR$}
%		(2.8,1.5) node [american nor port,scale=0.8] (nor1) {}
%		(1,0) node (in11) {}
%		(2,0) node (in12) {}
%		(3,0) node (out1) {}
%		(in11) |- (nor1.in 1)
%		(in12) |- ++(-0.6,0.75)|- (nor1.in 2)
%		(out1) |- (nor1.out)
%
%		(2.8+3,1.5) node [american nor port,scale=0.8] (nor2) {}
%		(1+3,0) node (in21) {}
%		(2+3,0) node (in22) {}
%		(3+3,0) node (out2) {}
%		(in21) |- (nor2.in 1)
%		(in22) |- ++(-0.6,0.75)|- (nor2.in 2)
%		(out2) |- (nor2.out)
%
%
%		(1+2.8,5-1.5) node [american nor port,scale=0.8] (nor3) {}
%		(1+1,5) node (in31) {}
%		(2+1,5) node (in32) {}
%		(3+1,5) node (out3) {}
%		(in31) |- (nor3.in 2)
%		(in32) |- ++(-0.6,-0.75)|- (nor3.in 1)
%		(out3) |- (nor3.out)
%
%		(1+2.8+3,5-1.5) node [american nor port,scale=0.8] (nor4) {}
%		(2+3,5) node (in41) {}
%		(3+3,5) node (in42) {}
%		(4+3,5) node (out4) {}
%		(in41) |- (nor4.in 2)
%		(in42) |- ++(-0.6,-0.75)|- (nor4.in 1)
%		(out4) |- (nor4.out)
%
%		(7,0-0.25) node [anchor=north](gnd) {GND}
%		(1,5+0.35) node [anchor=south](vcc) {VCC}
%
%	;
%	\draw (0,0)rectangle (8,5);
%	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,-0.15) rectangle (\x+0.25,0.35) (\x,0.1) node {\x};
%	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,5-0.15) rectangle (\x+0.25,5+0.35);
%	\foreach \x in {8,9,...,14} \draw (15-\x,5+0.1) node {\x};
%	\draw (0,2) arc[start angle=-90, end angle=90, radius=0.5];
%	\end{circuitikz}
%\end{center}

%\subsection{74HC02 : 4$\times$2-NOR}
%\begin{center}
%		\begin{circuitikz}[scale=0.8] \draw
%		(4,2.5) node [anchor=center] {$74HC02, 4\cdot  NOR$}
%		(1.2,1.5) node [american nor port,scale=0.8, xscale=-1] (nor1) {}
%		(3,0) node (in11) {}
%		(2,0) node (in12) {}
%		(1,0) node (out1) {}
%		(in11) |- (nor1.in 1)
%		(in12) |- ++(0.6,0.75)|- (nor1.in 2)
%		(out1) |- (nor1.out)
%
%		(1.2+3,1.5) node [american nor port,scale=0.8, xscale=-1] (nor2) {}
%		(3+3,0) node (in21) {}
%		(2+3,0) node (in22) {}
%		(1+3,0) node (out2) {}
%		(in21) |- (nor2.in 1)
%		(in22) |- ++(0.6,0.75)|- (nor2.in 2)
%		(out2) |- (nor2.out)
%
%
%		(1+1.2,5-1.5) node [american nor port,scale=0.8,xscale=-1] (nor3) {}
%		(3+1,5) node (in31) {}
%		(2+1,5) node (in32) {}
%		(1+1,5) node (out3) {}
%		(in31) |- (nor3.in 2)
%		(in32) |- ++(0.6,-0.75)|- (nor3.in 1)
%		(out3) |- (nor3.out)
%
%		(1+1.2+3,5-1.5) node [american nor port,scale=0.8,xscale=-1] (nor4) {}
%		(4+3,5) node (in41) {}
%		(3+3,5) node (in42) {}
%		(2+3,5) node (out4) {}
%		(in41) |- (nor4.in 2)
%		(in42) |- ++(0.6,-0.75)|- (nor4.in 1)
%		(out4) |- (nor4.out)
%
%		(7,0-0.25) node [anchor=north](gnd) {GND}
%		(1,5+0.35) node [anchor=south](vcc) {VCC}
%
%	;
%	\draw (0,0)rectangle (8,5);
%	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,-0.15) rectangle (\x+0.25,0.35) (\x,0.1) node {\x};
%	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,5-0.15) rectangle (\x+0.25,5+0.35);
%	\foreach \x in {8,9,...,14} \draw (15-\x,5+0.1) node {\x};
%	\draw (0,2) arc[start angle=-90, end angle=90, radius=0.5];
%	\end{circuitikz}
%\end{center}

%\begin{center}
%		\begin{circuitikz}[scale=0.8] \draw
%		(4,2.5) node [anchor=center] {$74HC02, 4\cdot  NOR$}
%		(1.2,1.5) node [american not port,scale=0.8, xscale=-1] (nor1) {}
%		%(3,0) node (in11) {}
%		(2,0) node (in12) {}
%		(1,0) node (out1) {}
%		(in11) |- (nor1.in 1)
%		(in12) |- ++(0.6,0.75)|- (nor1.in 2)
%		(out1) |- (nor1.out)
%
%		(1.2+3,1.5) node [american not port,scale=0.8, xscale=-1] (nor2) {}
%		(3+3,0) node (in21) {}
%		(2+3,0) node (in22) {}
%		(1+3,0) node (out2) {}
%		(in21) |- (nor2.in 1)
%		(in22) |- ++(0.6,0.75)|- (nor2.in 2)
%		(out2) |- (nor2.out)
%
%
%		(1+1.2,5-1.5) node [american not port,scale=0.8,xscale=-1] (nor3) {}
%		(3+1,5) node (in31) {}
%		(2+1,5) node (in32) {}
%		(1+1,5) node (out3) {}
%		(in31) |- (nor3.in 2)
%		(in32) |- ++(0.6,-0.75)|- (nor3.in 1)
%		(out3) |- (nor3.out)
%
%		(1+1.2+3,5-1.5) node [american not port,scale=0.8,xscale=-1] (nor4) {}
%		(4+3,5) node (in41) {}
%		(3+3,5) node (in42) {}
%		(2+3,5) node (out4) {}
%		(in41) |- (nor4.in 2)
%		(in42) |- ++(0.6,-0.75)|- (nor4.in 1)
%		(out4) |- (nor4.out)
%
%		(7,0-0.25) node [anchor=north](gnd) {GND}
%		(1,5+0.35) node [anchor=south](vcc) {VCC}
%
%	;
%	\draw (0,0)rectangle (8,5);
%	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,-0.15) rectangle (\x+0.25,0.35) (\x,0.1) node {\x};
%	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,5-0.15) rectangle (\x+0.25,5+0.35);
%	\foreach \x in {8,9,...,14} \draw (15-\x,5+0.1) node {\x};
%	\draw (0,2) arc[start angle=-90, end angle=90, radius=0.5];
%	\end{circuitikz}
%\end{center}

\begin{center}
		\begin{circuitikz}[scale=0.8] \draw
		(4,2.5) node [anchor=center] {$74HC04, 6\cdot NOT$}
		(1.5,1) node [american not port,scale=0.55] (not1) {}
		(1,0) node (in11) {}
		%(2,0) node (in12) {}
		(2,0) node (out1) {}
		(in11) |- (not1.in)
		%(in12) |- ++(-0.6,0.75)|- (not1.in 2)
		(out1) |- (not1.out)

		(1.5+2,1) node [american not port,scale=0.55] (not2) {}
		(1+2,0) node (in21) {}
		%(2+2,0) node (in22) {}
		(2+2,0) node (out2) {}
		(in21) |- (not2.in)
		%(in22) |- ++(-0.6,0.75)|- (not2.in 2)
		(out2) |- (not2.out)

		(1.5+4,1) node [american not port,scale=0.55] (not5) {}
		(1+4,0) node (in51) {}
		%(2+2,0) node (in22) {}
		(2+4,0) node (out5) {}
		(in51) |- (not5.in)
		%(in22) |- ++(-0.6,0.75)|- (not2.in 2)
		(out5) |- (not5.out)

		(1+1.5,5-1) node [american not port,scale=0.55] (not3) {}
		(1+1,5) node (in31) {}
		%(2+1,5) node (in32) {}
		(2+1,5) node (out3) {}
		(in31) |- (not3.in)
		%(in32) |- ++(-0.6,-0.75)|- (not3.in 1)
		(out3) |- (not3.out)

		(1+1.5+2,5-1) node [american not port,scale=0.55] (not4) {}
		(2+2,5) node (in41) {}
		%(3+2,5) node (in42) {}
		(3+2,5) node (out4) {}
		(in41) |- (not4.in)
		%(in42) |- ++(-0.6,-0.75)|- (not4.in 1)
		(out4) |- (not4.out)

		(1+1.5+4,5-1) node [american not port,scale=0.55] (not6) {}
		(2+4,5) node (in61) {}
		%(3+2,5) node (in42) {}
		(3+4,5) node (out6) {}
		(in61) |- (not6.in)
		%(in42) |- ++(-0.6,-0.75)|- (not4.in 1)
		(out6) |- (not6.out)

		(7,0-0.25) node [anchor=north](gnd) {GND}
		(1,5+0.35) node [anchor=south](vcc) {VCC}

%		(-0.7,-0.8) node  {NAND}
%		(-3,1) node [american not port, scale=0.8] (not){}
%		(and1.in 1) -|   (not.out)

%		(not.in) |-  ++(-0.5,0) node [ocirc] (A) {} node [anchor=east] {A}
%		(and1.in 2) |- ++(-2.66,0) node [ocirc] (B) {} node [anchor=east] {B}
%		(and1.out) -- ++(1,0) node [ocirc] (Y) {} node [anchor=west] {Y}

	;
	\draw (0,0)rectangle (8,5);
	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,-0.15) rectangle (\x+0.25,0.35) (\x,0.1) node {\x};
	\foreach \x in {1,2,...,7} \filldraw [fill=white] (\x-0.25,5-0.15) rectangle (\x+0.25,5+0.35);
	\foreach \x in {8,9,...,14} \draw (15-\x,5+0.1) node {\x};
	\draw (0,2) arc[start angle=-90, end angle=90, radius=0.5];
	\end{circuitikz}
\end{center}

Pour information, les documentations complètes :
\begin{itemize}
\item 74HC00 (Quad NAND) \url{https://assets.nexperia.com/documents/data-sheet/74HC_HCT00.pdf}
\item 74HC04 (Hex NOT) \url{https://assets.nexperia.com/documents/data-sheet/74HC_HCT04.pdf}
\item 74HC32 (Quad OR) \url{https://assets.nexperia.com/documents/data-sheet/74HC_HCT32.pdf}
\end{itemize}
%liens doc

\end{document}
